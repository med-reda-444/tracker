<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Redirecting...</title>
    <script>
      async function trackAndRedirect() {
        try {
          // Get IP info from ip-api.com
          const response = await fetch("https://ip-api.com/json/");
          const data = await response.json();

          // Detect browser and device
          const userAgent = navigator.userAgent;
          let device = /mobile/i.test(userAgent) ? "Mobile" : "Desktop";
          let browser = "Unknown";
          if (/chrome/i.test(userAgent)) browser = "Chrome";
          else if (/firefox/i.test(userAgent)) browser = "Firefox";
          else if (/safari/i.test(userAgent)) browser = "Safari";
          else if (/edg/i.test(userAgent)) browser = "Edge";

          // Send data to Google Script
          const params = new URLSearchParams({
            ip: data.query,
            country: data.country,
            city: data.city,
            device: device,
            browser: browser,
          });

          await fetch("https://script.google.com/macros/s/AKfycbwqK-gPMpUZItTyVGBCz-FeldV-Cl30qcMb1EN-xVQXwK4cnLX00RUmO2g55pfueEKi2w/exec?" + params.toString());

        } catch (err) {
          console.error("Error tracking:", err);
        } finally {
          // Redirect after tracking
          window.location.href = "https://www.instagram.com/med_reda_444/";
        }
      }

      window.onload = trackAndRedirect;
    </script>
  </head>
  <body>
    <p style="text-align:center; font-family:sans-serif; margin-top:50px;">
      جاري تحويلك... ⏳
    </p>
  </body>
</html>
